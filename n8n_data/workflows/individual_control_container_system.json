{
  "name": "Container System Control Framework",
  "active": false,
  "nodes": [
    {
      "parameters": {
        "values": {
          "string": [
            {
              "name": "container_action",
              "value": "{{$parameter.container_action || 'status'}}"
            },
            {
              "name": "container_position",
              "value": "{{$parameter.container_position || 'left_front'}}"
            },
            {
              "name": "operation_mode",
              "value": "{{$parameter.operation_mode || 'simulation'}}"
            }
          ],
          "boolean": [
            {
              "name": "enable_simulation",
              "value": "{{$parameter.enable_simulation}}"
            }
          ]
        }
      },
      "name": "Configure Container Operation",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.2,
      "position": [
        240,
        300
      ],
      "id": "container_001"
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $json.operation_mode }}",
              "value2": "simulation",
              "operation": "equal"
            }
          ]
        }
      },
      "name": "Check Operation Mode",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        460,
        300
      ],
      "id": "container_002"
    },
    {
      "parameters": {
        "jsCode": "// Simulate container system operations\nconst action = $input.item.json.container_action;\nconst position = $input.item.json.container_position;\n\n// Container positions\nconst positions = {\n  'left_front': { id: 1, status: 'empty', capacity: 100 },\n  'left_back': { id: 2, status: 'empty', capacity: 100 },\n  'right_front': { id: 3, status: 'empty', capacity: 100 },\n  'right_back': { id: 4, status: 'empty', capacity: 100 }\n};\n\nconst container = positions[position] || positions['left_front'];\n\nlet result = {\n  success: true,\n  message: '',\n  container_id: container.id,\n  position: position,\n  action: action,\n  status: container.status,\n  capacity: container.capacity,\n  timestamp: new Date().toISOString()\n};\n\n// Simulate different actions\nswitch (action) {\n  case 'pickup':\n    if (container.status === 'empty') {\n      result.message = `Container ${container.id} at ${position} is empty - cannot pickup`;\n      result.success = false;\n    } else {\n      result.message = `Picked up item from container ${container.id} at ${position}`;\n      result.status = 'empty';\n    }\n    break;\n  \n  case 'place':\n    if (container.status === 'occupied') {\n      result.message = `Container ${container.id} at ${position} is full - cannot place`;\n      result.success = false;\n    } else {\n      result.message = `Placed item in container ${container.id} at ${position}`;\n      result.status = 'occupied';\n    }\n    break;\n  \n  case 'check':\n    result.message = `Container ${container.id} at ${position} status: ${container.status} (${container.capacity}% capacity)`;\n    break;\n  \n  case 'empty':\n    result.message = `Emptied container ${container.id} at ${position}`;\n    result.status = 'empty';\n    break;\n  \n  default:\n    result.message = `Unknown action: ${action}`;\n    result.success = false;\n}\n\nreturn [{ json: { ...$input.item.json, simulation_result: result } }];"
      },
      "name": "Simulate Container Operation",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        680,
        160
      ],
      "id": "container_003"
    },
    {
      "parameters": {
        "message": "üé≠ SIMULATION: {{ $json.simulation_result.message }}",
        "level": "info"
      },
      "name": "Log Simulation Result",
      "type": "n8n-nodes-base.log",
      "typeVersion": 1,
      "position": [
        900,
        160
      ],
      "id": "container_004"
    },
    {
      "parameters": {
        "values": {
          "boolean": [
            {
              "name": "operation_completed",
              "value": "={{ $json.simulation_result.success }}"
            }
          ],
          "string": [
            {
              "name": "operation_status",
              "value": "simulation_completed"
            },
            {
              "name": "result_message",
              "value": "={{ $json.simulation_result.message }}"
            }
          ]
        }
      },
      "name": "Set Simulation Results",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.2,
      "position": [
        1120,
        160
      ],
      "id": "container_005"
    },
    {
      "parameters": {
        "url": "http://127.0.0.1:5000/api/robot/containers/{{ $json.container_position }}",
        "method": "POST",
        "options": {
          "bodyContentType": "json"
        },
        "sendBody": true,
        "bodyParametersJson": "{\n  \"action\": \"{{ $json.container_action }}\"\n}"
      },
      "name": "Execute Container Operation",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        680,
        440
      ],
      "id": "container_006"
    },
    {
      "parameters": {
        "message": "üîß HARDWARE MODE: Container {{ $json.container_position }} - {{ $json.container_action }} operation completed",
        "level": "info"
      },
      "name": "Log Hardware Operation Result",
      "type": "n8n-nodes-base.log",
      "typeVersion": 1,
      "position": [
        900,
        440
      ],
      "id": "container_007"
    },
    {
      "parameters": {
        "values": {
          "boolean": [
            {
              "name": "hardware_available",
              "value": true
            },
            {
              "name": "operation_completed",
              "value": "={{ $json.success }}"
            }
          ],
          "string": [
            {
              "name": "operation_status",
              "value": "hardware_operation_completed"
            },
            {
              "name": "framework_status",
              "value": "fully_implemented"
            },
            {
              "name": "result_message",
              "value": "={{ $json.message }}"
            }
          ]
        }
      },
      "name": "Set Hardware Operation Results",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.2,
      "position": [
        1120,
        440
      ],
      "id": "container_008"
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $json.container_position }}",
              "value2": "left_front",
              "operation": "equal"
            }
          ]
        }
      },
      "name": "Route by Container Position",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        1340,
        300
      ],
      "id": "container_008"
    },
    {
      "parameters": {
        "message": "üì¶ Left Front Container Operation Framework - Ready for hardware implementation",
        "level": "info"
      },
      "name": "Left Front Container",
      "type": "n8n-nodes-base.log",
      "typeVersion": 1,
      "position": [
        1560,
        160
      ],
      "id": "container_009"
    },
    {
      "parameters": {
        "message": "üì¶ Left Back Container Operation Framework - Ready for hardware implementation",
        "level": "info"
      },
      "name": "Left Back Container",
      "type": "n8n-nodes-base.log",
      "typeVersion": 1,
      "position": [
        1560,
        300
      ],
      "id": "container_010"
    },
    {
      "parameters": {
        "message": "üì¶ Right Front Container Operation Framework - Ready for hardware implementation",
        "level": "info"
      },
      "name": "Right Front Container",
      "type": "n8n-nodes-base.log",
      "typeVersion": 1,
      "position": [
        1560,
        440
      ],
      "id": "container_011"
    },
    {
      "parameters": {
        "message": "üì¶ Right Back Container Operation Framework - Ready for hardware implementation",
        "level": "info"
      },
      "name": "Right Back Container",
      "type": "n8n-nodes-base.log",
      "typeVersion": 1,
      "position": [
        1560,
        580
      ],
      "id": "container_012"
    },
    {
      "parameters": {
        "values": {
          "string": [
            {
              "name": "framework_ready_actions",
              "value": "pickup,place,check,empty,status"
            },
            {
              "name": "supported_positions",
              "value": "left_front,left_back,right_front,right_back"
            },
            {
              "name": "integration_points",
              "value": "ROS2 API endpoints: /api/container/{position}/{action}"
            }
          ]
        }
      },
      "name": "Document Framework Capabilities",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.2,
      "position": [
        1780,
        300
      ],
      "id": "container_013"
    },
    {
      "parameters": {
        "message": "üèóÔ∏è Container System Status: {{ $json.operation_status }} | Hardware Available: {{ $json.hardware_available }} | Framework: {{ $json.framework_status }}",
        "level": "info"
      },
      "name": "Log Final Status",
      "type": "n8n-nodes-base.log",
      "typeVersion": 1,
      "position": [
        2000,
        300
      ],
      "id": "container_014"
    }
  ],
  "connections": {
    "Configure Container Operation": {
      "main": [
        [
          {
            "node": "Check Operation Mode",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check Operation Mode": {
      "main": [
        [
          {
            "node": "Simulate Container Operation",
            "type": "main",
            "index": 0
          },
          {
            "node": "Log Simulation Result",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Execute Container Operation",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Simulate Container Operation": {
      "main": [
        [
          {
            "node": "Set Simulation Results",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Log Simulation Result": {
      "main": [
        [
          {
            "node": "Set Simulation Results",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set Simulation Results": {
      "main": [
        [
          {
            "node": "Route by Container Position",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Execute Container Operation": {
      "main": [
        [
          {
            "node": "Log Hardware Operation Result",
            "type": "main",
            "index": 0
          },
          {
            "node": "Set Hardware Operation Results",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Log Hardware Operation Result": {
      "main": [
        [
          {
            "node": "Set Hardware Operation Results",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set Hardware Operation Results": {
      "main": [
        [
          {
            "node": "Route by Container Position",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Route by Container Position": {
      "main": [
        [
          {
            "node": "Left Front Container",
            "type": "main",
            "index": 0
          },
          {
            "node": "Document Framework Capabilities",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Left Back Container",
            "type": "main",
            "index": 0
          },
          {
            "node": "Document Framework Capabilities",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Left Front Container": {
      "main": [
        [
          {
            "node": "Log Framework Status",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Left Back Container": {
      "main": [
        [
          {
            "node": "Log Framework Status",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Right Front Container": {
      "main": [
        [
          {
            "node": "Log Framework Status",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Right Back Container": {
      "main": [
        [
          {
            "node": "Log Framework Status",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Document Framework Capabilities": {
      "main": [
        [
          {
            "node": "Log Framework Status",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "pinData": {},
  "versionId": "99001122-3344-5566-7788-990011223344"
}