# Motor Configuration
# PG23 Built-in Encoder Motor Specifications

motor_specifications:
  # Motor model
  model: "PG23"
  type: "DC Motor with Built-in Encoder"
  
  # Motor electrical specifications
  voltage: 12.0  # Volts
  no_load_rpm: 15500  # RPM (15.5k RPM)
  
  # Encoder specifications
  encoder:
    ppr: 7  # Pulses Per Revolution
    quadrature_multiplier: 4  # A/B channel quadrature encoding
    counts_per_revolution: 28  # PPR * quadrature_multiplier
    
  # Wheel specifications
  wheel:
    radius: 0.075  # meters (75mm)
    width: 0.04  # meters (40mm)
    
  # Encoder calculation constants
  # Distance per encoder count (meters)
  # distance_per_count = (2 * pi * wheel_radius) / counts_per_revolution
  distance_per_count: 0.0168  # meters (approximately 16.8 mm per count)

# Motor applications
# PG23 Motor Pinout: M+, M-, GND, VIN, DATA(A), DATA(B)
# Note: PG23 motors have built-in encoders only - require L298N motor drivers
# Motor Control: L298N DIR and PWM pins
# Encoder Reading: DATA(A) and DATA(B) pins (read-only encoder feedback)
motors:
  omni_wheels:
    count: 3
    locations:
      - name: "front_left"
        control_interface:
          type: "l298n"  # L298N motor driver
          dir_pin: 17    # GPIO17 - L298N DIR pin (direction control)
          pwm_pin: 27    # GPIO27 - L298N PWM pin (speed control)
        encoder_interface:
          encoder_a: 22  # GPIO22 - Encoder DATA(A) pin (read only)
          encoder_b: 23  # GPIO23 - Encoder DATA(B) pin (read only)
        power_connections:
          l298n_vs: "12V"   # L298N VS → 12V Power Supply (motor power)
          l298n_vcc: "5V"   # L298N VCC → 5V (logic power)
          l298n_gnd: "Common GND"  # L298N GND → Common Ground
          m_plus: "L298N OUT1"  # PG23 M+ → L298N OUT1
          m_minus: "L298N OUT2" # PG23 M- → L298N OUT2
          gnd: "Common GND"     # PG23 GND → Common Ground
          vin: "5V"             # PG23 VIN → 5V (encoder power only)
      - name: "front_right"
        control_interface:
          type: "l298n"
          dir_pin: 24    # GPIO24 - L298N DIR pin
          pwm_pin: 25    # GPIO25 - L298N PWM pin
        encoder_interface:
          encoder_a: 16  # GPIO16 - Encoder DATA(A) pin (read only)
          encoder_b: 26  # GPIO26 - Encoder DATA(B) pin (read only)
        power_connections:
          l298n_vs: "12V"
          l298n_vcc: "5V"
          l298n_gnd: "Common GND"
          m_plus: "L298N OUT1"
          m_minus: "L298N OUT2"
          gnd: "Common GND"
          vin: "5V"
      - name: "back"
        control_interface:
          type: "l298n"
          dir_pin: 5     # GPIO5 - L298N DIR pin
          pwm_pin: 6     # GPIO6 - L298N PWM pin
        encoder_interface:
          encoder_a: 7   # GPIO7 - Encoder DATA(A) pin (read only)
          encoder_b: 9   # GPIO9 - Encoder DATA(B) pin (read only)
        power_connections:
          l298n_vs: "12V"
          l298n_vcc: "5V"
          l298n_gnd: "Common GND"
          m_plus: "L298N OUT1"
          m_minus: "L298N OUT2"
          gnd: "Common GND"
          vin: "5V"
        
  gripper_lifter:
    count: 1
    location:
      name: "center"
      control_interface:
        type: "l298n"
        dir_pin: 13     # GPIO13 - L298N DIR pin
        pwm_pin: 12     # GPIO12 - L298N PWM pin
      encoder_interface:
        encoder_a: 20   # GPIO20 - Encoder DATA(A) pin (read only)
        encoder_b: 21   # GPIO21 - Encoder DATA(B) pin (read only)
      power_connections:
        l298n_vs: "12V"
        l298n_vcc: "5V"
        l298n_gnd: "Common GND"
        m_plus: "L298N OUT1"
        m_minus: "L298N OUT2"
        gnd: "Common GND"
        vin: "5V"

# PID control parameters (may need tuning)
pid_control:
  kp: 0.5    # Proportional gain
  ki: 0.01   # Integral gain
  kd: 0.1    # Derivative gain
  
  # Velocity limits
  max_velocity: 1.0      # m/s
  max_acceleration: 2.0  # m/s²
  
  # Position control
  position_tolerance: 0.01  # meters
  velocity_tolerance: 0.05  # m/s

